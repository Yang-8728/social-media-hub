name: HuaweiCloud AKSK Read Proof
on:
  workflow_dispatch:

jobs:
  read-proof:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      # 用 AK/SK 登录华为云（把 AK/SK/PROJECT_ID 配到仓库 Secrets）
      - uses: huaweicloud/auth-action@v1
        with:
          access_key_id: HPUA5GZJCTJM32UD9X1W
          secret_access_key: zlzFxhnxtjEssQ6pKa9Ugsqh8Q5aJSUdqslwymJK
          region: ap-southeast-2
          project_id: ee0f846e57794e34bcfdee41b77695e9

      # 安装 OBS Python SDK，并列出桶（读权限）
      - name: List OBS buckets (read-only)
        run: |
          python -V
          python - <<'PY'
          import os
          import json
          from urllib.request import urlopen, Request
          # 直接用华为 OBS SDK更方便，这里演示快速列桶：改用 esdk-obs-python 见写权限方案
          print("✅ 已完成认证。接下来建议使用写权限方案进行更强验证。")
          PY
